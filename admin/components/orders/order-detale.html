<div class="content">
    <div class="content-body">
        <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                <div class="panel fade in panel-default panel-fill" data-fill-color="true" data-init-panel="true" ng-switch="$ctrl.editUserInfo">
                    <div class="panel-heading">
                        <h3 class="panel-title"><i class="fa fa-user-circle"></i> Информация о пользователе </h3>
                        <i class="fa fa-pencil-square-o editBut" ng-click="$ctrl.editUserInfo = !$ctrl.editUserInfo" aria-hidden="true"></i>
                    </div>
                    <div ng-switch-when="false" class="panel-body">
                        <div class="field">
                            <div class="fieldName">
                                Имя:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.firstname}}
                            </div>
                        </div>
                        <div class="field">
                            <div class="fieldName">
                                Фамилия:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.lastname}}
                            </div>
                        </div>
                        <div class="field">
                            <div class="fieldName">
                                Email:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.email}}
                            </div>
                        </div>
                        <div class="field">
                            <div class="fieldName">
                                Страна:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.country}}
                            </div>
                        </div>
                        <div class="field">
                            <div class="fieldName">
                                Телефон:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.phone}}
                            </div>
                        </div>
                    </div>
                    <div ng-switch-when="true" class="panel-body">
                        <form role="form">
                            <div class="form-group">
                                <label>Имя</label>
                                <input class="form-control" placeholder="Имя" ng-init="$ctrl.newInfo.firstname = $ctrl.order.firstname" ng-model="$ctrl.newInfo.firstname">
                            </div>
                            <div class="form-group">
                                <label>Фамилия</label>
                                <input class="form-control" placeholder="Фамилия" ng-init="$ctrl.newInfo.lastname = $ctrl.order.lastname" ng-model="$ctrl.newInfo.lastname">
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input class="form-control" placeholder="Email" ng-init="$ctrl.newInfo.email = $ctrl.order.email" ng-model="$ctrl.newInfo.email">
                            </div>
                            <div class="form-group">
                                <label>Страна</label>
                                <input class="form-control" placeholder="Страна" ng-init="$ctrl.newInfo.state = $ctrl.order.state" ng-model="$ctrl.newInfo.state">
                            </div>
                            <div class="form-group">
                                <label>Телефон</label>
                                <input class="form-control" placeholder="Телефон" ng-init="$ctrl.newInfo.phone = $ctrl.order.phone" ng-model="$ctrl.newInfo.phone">
                            </div>
                            <div class="form-group">
                                <button type="submit" class="btn btn-default" ng-click="$ctrl.saveChanges('user')">Сохранить</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                <div class="panel fade in panel-default panel-fill" data-fill-color="true" data-init-panel="true" ng-switch="$ctrl.editOrderInfo">
                    <div class="panel-heading">
                        <h3 class="panel-title"><i class="fa fa-file-text-o"></i> Информация о заказе</h3>
                        <i class="fa fa-pencil-square-o editBut" ng-click="$ctrl.editOrderInfo = !$ctrl.editOrderInfo" aria-hidden="true"></i>
                    </div>
                    <div ng-switch-when="false" class="panel-body">
                        <div class="field">
                            <div class="fieldName">
                                Номер:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.order_num}}
                            </div>
                        </div>
                        <div class="field">
                            <div class="fieldName">
                                Сумма:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.price}}
                            </div>
                        </div>
                        <div class="field">
                            <div class="fieldName">
                                Доставка:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.deliveryCost?$ctrl.curMethod.price.amount:0}}
                            </div>
                        </div>
                        <div class="field">
                            <div class="fieldName">
                                Валюта:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.currency}}
                            </div>
                        </div>
                        <div class="field">
                            <div class="fieldName">
                                Дата:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.created | date:'short'}}
                            </div>
                        </div>
                        <div class="field">
                            <div class="fieldName">
                                Статус:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.status}}
                            </div>
                        </div>
                    </div>
                    <div ng-switch-when="true" class="panel-body">
                        <form role="form">
                            <div class="form-group">
                                <label>Валюта</label>
                                <select class="form-control" ng-model="$ctrl.newInfo.currency" ng-init="$ctrl.newInfo.currency = $ctrl.order.currency">
                                    <option value="UAH">UAH</option>
                                    <option value="USD">USD</option>
                                    <option value="RUR">RUB</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Сатус заказа</label>
                                <select class="form-control" ng-model="$ctrl.newInfo.status" ng-init="$ctrl.newInfo.status = $ctrl.order.status">
                                    <option value="Оформлена">Оформлена</option>
                                    <option value="Отменена">Отменена</option>
                                    <option value="Комплектуется">Комплектуется</option>
                                    <option value="Отправленна">Отправленна</option>
                                    <option value="Возвращена">Возвращена</option>
                                    <option value="Выполнена">Выполнена</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <button type="submit" class="btn btn-default" ng-click="$ctrl.saveChanges('order')">Сохранить</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                <div class="panel fade in panel-default panel-fill" data-fill-color="true" data-init-panel="true" ng-show="$ctrl.order.email">
                    <div class="panel-heading">
                        <h3 class="panel-title"><i class="fa fa-file-text-o"></i> Сообщение для пользователя</h3>
                    </div>
                    <div class="panel-body">
                        <form role="form">
                            <div class="form-group">
                                <label>Тема сообщения</label>
                                <input type="text" class="form-control" ng-model="$ctrl.mail.subject">
                            </div>
                            <div class="form-group">
                                <label for="inputTextarea">Сообщение</label>
                                <textarea rows="5" class="form-control" style="resize: vertical" id="inputTextarea" ng-model="$ctrl.mail.text"></textarea>
                            </div>

                            <div class="error" ng-show="$ctrl.error">
                                {{$ctrl.error}}
                            </div>

                            <div class="form-group">
                                <button type="submit" class="btn btn-default" ng-click="$ctrl.sendMail()">Отправить</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                <div class="panel fade in panel-default panel-fill" data-fill-color="true" data-init-panel="true" ng-switch="$ctrl.editOrderDetail">
                    <div class="panel-heading">
                        <h3 class="panel-title"><i class="fa fa-user-circle"></i> Информация о доставке </h3>
                        <i class="fa fa-pencil-square-o editBut" ng-click="$ctrl.editOrderDetail = !$ctrl.editOrderDetail" aria-hidden="true"></i>
                    </div>
                    <div ng-switch-when="false" class="panel-body">
                        <div class="field">
                            <div class="fieldName">
                                Способ доставки:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.curMethod.name}}
                            </div>
                        </div>
                        <div class="field">
                            <div class="fieldName">
                                Город:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.delivery.city}}
                            </div>
                        </div>
                        <div class="field">
                            <div class="fieldName">
                                Номер отделения:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.delivery.numberPost}}
                            </div>
                        </div>
                        <div class="field" ng-show="$ctrl.order.delivery.onHome">
                            <div class="fieldName">
                                Курьрская доставка:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.delivery.onHome?'Да':'Нет'}}
                            </div>
                        </div>
                        <div class="field" ng-show="$ctrl.order.delivery.onHome">
                            <div class="fieldName">
                                Улица:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.delivery.street}}
                            </div>
                        </div>
                        <div class="field" ng-show="$ctrl.order.delivery.onHome">
                            <div class="fieldName">
                                Дом:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.delivery.house}}
                            </div>
                        </div>
                        <div class="field" ng-show="$ctrl.order.delivery.onHome">
                            <div class="fieldName">
                                Квартира:
                            </div>
                            <div class="fieldValue">
                                {{$ctrl.order.delivery.flat}}
                            </div>
                        </div>
                    </div>
                    <div ng-switch-when="true" class="panel-body">
                        <form role="form">
                            <div class="form-group">
                                <select class="form-control" ng-init="$ctrl.newInfo.delivery.method = $ctrl.order.delivery.method" ng-model="$ctrl.order.delivery.method" ng-change="$ctrl.changeMethod()">
                                    <option value="{{method.uuid}}" ng-repeat="method in $ctrl.deliveryMethods()">{{method.name}}</option>
                                </select>

                                <div ng-if="$ctrl.choosedMethod">
                                    <p style="margin-top: 12px;">Стоимость доставки: {{$ctrl.choosedMethod.price.amount + ' ' +$ctrl.order.currency}}</p>
                                    <span>Бесплаткая доставка от: {{$ctrl.choosedMethod.free + ' ' +$ctrl.order.currency}}</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Город</label>
                                <input class="form-control" placeholder="Город" ng-init="$ctrl.newInfo.delivery.city = $ctrl.order.delivery.city" ng-model="$ctrl.newInfo.delivery.city">
                            </div>
                            <div class="form-group">
                                <label>Номер отделения</label>
                                <input class="form-control" placeholder="Номер отделения" ng-init="$ctrl.newInfo.delivery.numberPost = $ctrl.order.delivery.numberPost" ng-model="$ctrl.newInfo.delivery.numberPost">
                            </div>
                            <div class="form-group">
                                <div class="checkbo">
                                    <input type="checkbox" id="123" name="option" value="true" ng-init="$ctrl.newInfo.delivery.onHome = $ctrl.order.delivery.onHome" ng-model="$ctrl.newInfo.delivery.onHome" ng-change="$ctrl.viewDeliery = !$ctrl.viewDeliery;"/>
                                    <label for="123"></label><span style="color: #000">Курьерская доставка</span>
                                </div>
                            </div>
                            <div class="form-group" ng-show="$ctrl.newInfo.delivery.onHome">
                                <label>Улица</label>
                                <input class="form-control" placeholder="Улица" ng-init="$ctrl.newInfo.delivery.street = $ctrl.order.delivery.street" ng-model="$ctrl.newInfo.delivery.street">
                            </div>
                            <div class="form-group" ng-show="$ctrl.newInfo.delivery.onHome">
                                <label>Дом</label>
                                <input class="form-control" placeholder="Дом" ng-init="$ctrl.newInfo.delivery.house = $ctrl.order.delivery.house" ng-model="$ctrl.newInfo.delivery.house">
                            </div>
                            <div class="form-group" ng-show="$ctrl.newInfo.delivery.onHome">
                                <label>Квартира</label>
                                <input class="form-control" placeholder="Квартира" ng-init="$ctrl.newInfo.delivery.flat = $ctrl.order.delivery.flat" ng-model="$ctrl.newInfo.delivery.flat">
                            </div>
                            <div class="form-group">
                                <button type="submit" class="btn btn-default" ng-click="$ctrl.saveChanges('delivery')">Сохранить</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="panel fade in panel-default panel-fill" data-fill-color="true" data-init-panel="true">
                    <div class="panel-heading">
                        <h3 class="panel-title"><i class="fa fa-file-text-o"></i>
                            Список товаров
                        </h3>
                        <div class="order_new_product">
                            <span ng-if="$ctrl.showAddProduct">
                                <input type="text" placeholder="Поиск по артиклю" ng-model="$ctrl.searchValue" ng-change="$ctrl.searchProduct($ctrl.searchValue)" ng-disabled="$ctrl.searchDisabled">

                                <ul>
                                    <li ng-repeat="product in $ctrl.searchProducts" ng-click="$ctrl.pushProduct($ctrl.order, $index)" modal-admin="addOrderProd">{{product.name}}</li>
                                </ul>
                            </span>
                            <i class="fa fa-{{$ctrl.showAddProduct ? 'minus' : 'plus'}}" style="margin-right: 10px; cursor: pointer" tooltip-placement="top" uib-tooltip="{{$ctrl.showAddProduct ? 'Отмена' : 'Добавить товар'}}" ng-click="$ctrl.showAddProduct = !$ctrl.showAddProduct"></i>
                        </div>
                    </div>

                    <div class="panel-body">
                        <table class="table table-grid">
                            <thead>
                            <tr>
                                <th>Фото</th>
                                <th>Название</th>
                                <th>Артикул</th>
                                <th>Параметры</th>
                                <th>Количество</th>
                                <th>Цена</th>
                                <th>Удалить</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="product in $ctrl.order.products">
                                <td>
                                    <img style="object-fit: cover;" class="product-photo" ng-src="{{$ctrl.Conf.api_path}}/file/{{product.photo.uuid}}" alt="" width="100" height="80" no-image>
                                </td>
                                <td>{{product.name}}</td>
                                <td>{{product.article}}</td>
                                <td>
                                    <div ng-repeat="combo in product.combo">
                                        <span>{{combo.name}}</span>
                                        {{combo.value}}
                                    </div>
                                </td>
                                <td>{{product.count}}</td>
                                <td>{{product.price}}</td>
                                <td>
                                    <button class="btn btn-default btn-sm" ng-click="$ctrl.pushProduct($ctrl.order, $index)" modal-admin="editOrderProd">Edit</button>
                                    <button ng-show="$ctrl.order.products.length > 1" class="btn btn-default btn-sm" ng-click="$ctrl.pushProduct($ctrl.order, $index)" modal-admin="delOrderProd">Remove</button>
                                    <button ng-show="$ctrl.order.products.length === 1" class="btn btn-default btn-sm" ng-click="$ctrl.removeOrder($ctrl.order.uuid, $index)" modal-admin="delOrder">Remove</button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>